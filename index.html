<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FireLiQ Store</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: #1a1a1a;
            color: white;
            font-family: 'Inter', sans-serif;
            margin: 0;
            overflow-x: hidden;
        }
        .fire-shadow {
            filter: drop-shadow(0 0 10px rgba(249, 115, 22, 0.6));
        }
        .cartoon-border {
            border: 3px solid #121212;
            box-shadow: 4px 4px 0px #000;
        }
        input::placeholder { color: #52525b; }
        .success-bg {
            background: radial-gradient(circle, rgba(249,115,22,0.15) 0%, rgba(0,0,0,1) 70%);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- –î–ê–ù–ù–´–ï –ò –ö–û–ù–§–ò–ì ---
        const ADMIN_ID = "8480602033";
        const LOGO_URL = "https://i.ibb.co/pBTD99y/image.png";

        // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ò–∫–æ–Ω–æ–∫ (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ SVG –¥–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç–∏)
        const IconCart = () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>;
        const IconSettings = () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>;

        function App() {
            const [view, setView] = useState('shop');
            const [isAdmin, setIsAdmin] = useState(false);
            const [products, setProducts] = useState([
                { id: 1, name: "FireLiQ Classic", flavor: "Mango Ice", price: 15, inStock: true },
                { id: 2, name: "FireLiQ Ultra", flavor: "Blue Razz", price: 20, inStock: true }
            ]);
            const [cart, setCart] = useState({});
            const [orderForm, setOrderForm] = useState({ name: '', phone: '', city: '', street: '', zip: '' });

            useEffect(() => {
                const tg = window.Telegram?.WebApp;
                if (tg) {
                    tg.ready();
                    tg.expand();
                    if (tg.initDataUnsafe?.user?.id?.toString() === ADMIN_ID) {
                        setIsAdmin(true);
                    }
                }
                // –î–ª—è —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –ü–ö –º–æ–∂–Ω–æ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å:
                // setIsAdmin(true); 
            }, []);

            const total = Object.values(cart).reduce((sum, item) => sum + (item.price * item.qty), 0);

            const addToCart = (p) => {
                setCart(prev => ({
                    ...prev,
                    [p.id]: { ...p, qty: (prev[p.id]?.qty || 0) + 1 }
                }));
            };

            const handleOrder = () => {
                const items = Object.values(cart).map(i => `${i.name} x${i.qty}`).join('\n');
                const msg = `üî• –ó–ê–ö–ê–ó FireLiQ\nüë§: ${orderForm.name}\nüìû: ${orderForm.phone}\nüìç: ${orderForm.zip}, ${orderForm.city}, ${orderForm.street}\n\n–¢–æ–≤–∞—Ä—ã:\n${items}\n–ò—Ç–æ–≥–æ: ${total}‚Ç¨`;
                if (window.Telegram?.WebApp) {
                    window.Telegram.WebApp.sendData(msg);
                } else {
                    console.log(msg);
                }
                setView('success');
            };

            return (
                <div className="max-w-md mx-auto min-h-screen flex flex-col relative bg-[#1a1a1a]">
                    
                    {/* Header */}
                    <header className="p-4 bg-[#121212] flex justify-between items-center border-b border-zinc-800 sticky top-0 z-40">
                        <div className="flex items-center gap-3 cursor-pointer" onClick={() => setView('shop')}>
                            <img src={LOGO_URL} className="w-10 h-10 object-contain fire-shadow" alt="Logo" />
                            <span className="font-black italic text-xl uppercase tracking-tighter text-orange-500">FireLiQ</span>
                        </div>
                        <div className="flex gap-2">
                            {isAdmin && (
                                <button onClick={() => setView(view === 'admin' ? 'shop' : 'admin')} className="p-2 bg-zinc-800 rounded-xl border border-zinc-700">
                                    <IconSettings />
                                </button>
                            )}
                            <button onClick={() => setView('cart')} className="relative p-2 bg-zinc-800 rounded-xl border border-zinc-700">
                                <IconCart />
                                {total > 0 && <span className="absolute -top-1 -right-1 bg-white text-black text-[10px] font-black w-5 h-5 rounded-full flex items-center justify-center">!</span>}
                            </button>
                        </div>
                    </header>

                    {/* Shop View */}
                    {view === 'shop' && (
                        <main className="p-4 grid grid-cols-2 gap-4 pb-24 animate__animated animate__fadeIn">
                            {products.filter(p => p.inStock).map(p => (
                                <div key={p.id} className="bg-zinc-900 p-3 rounded-[30px] border border-zinc-800 flex flex-col gap-2 active:scale-95 transition-all">
                                    <div className="h-32 bg-black rounded-[22px] flex items-center justify-center relative overflow-hidden">
                                        <img src={LOGO_URL} className="absolute opacity-10 scale-150 rotate-12" alt="bg" />
                                        <span className="text-4xl z-10">üî•</span>
                                    </div>
                                    <div className="px-1">
                                        <h3 className="font-black italic text-xs uppercase truncate leading-none">{p.name}</h3>
                                        <p className="text-[9px] text-zinc-500 font-bold uppercase mt-1 italic">{p.flavor}</p>
                                    </div>
                                    <div className="flex justify-between items-center px-1 mt-1">
                                        <span className="text-orange-500 font-black text-lg">{p.price}‚Ç¨</span>
                                        <button onClick={() => addToCart(p)} className="bg-orange-600 p-2 rounded-xl text-white">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="4" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                        </button>
                                    </div>
                                </div>
                            ))}
                        </main>
                    )}

                    {/* Cart View */}
                    {view === 'cart' && (
                        <main className="p-6 pb-24 animate__animated animate__slideInUp">
                            <h2 className="text-3xl font-black italic uppercase text-orange-500 mb-6 tracking-tighter">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</h2>
                            {Object.values(cart).length > 0 ? (
                                <div className="space-y-6">
                                    <div className="space-y-2">
                                        {Object.values(cart).map(item => (
                                            <div key={item.id} className="bg-zinc-900 p-4 rounded-2xl flex justify-between items-center border border-zinc-800">
                                                <div className="font-black italic text-xs uppercase truncate">{item.name}</div>
                                                <div className="flex items-center gap-3 bg-black px-3 py-1.5 rounded-xl border border-zinc-800">
                                                    <button onClick={() => {
                                                        const newQty = cart[item.id].qty - 1;
                                                        if (newQty <= 0) {
                                                            const newCart = {...cart}; delete newCart[item.id]; setCart(newCart);
                                                        } else {
                                                            setCart({...cart, [item.id]: {...item, qty: newQty}});
                                                        }
                                                    }} className="text-zinc-500">-</button>
                                                    <span className="font-black text-orange-500 text-sm">{item.qty}</span>
                                                    <button onClick={() => addToCart(item)} className="text-orange-500">+</button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>

                                    <div className="bg-zinc-900 p-5 rounded-[35px] space-y-3 border border-zinc-800 shadow-xl">
                                        <input placeholder="–í–∞—à–µ –ò–º—è" className="w-full bg-black p-4 rounded-2xl outline-none text-sm border border-zinc-800 focus:border-orange-500 transition-all" value={orderForm.name} onChange={e => setOrderForm({...orderForm, name: e.target.value})} />
                                        <input placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" className="w-full bg-black p-4 rounded-2xl outline-none text-sm border border-zinc-800 focus:border-orange-500 transition-all" value={orderForm.phone} onChange={e => setOrderForm({...orderForm, phone: e.target.value})} />
                                        <div className="h-px bg-zinc-800 my-2" />
                                        <input placeholder="Stadt (–ì–æ—Ä–æ–¥)" className="w-full bg-black p-4 rounded-2xl outline-none text-sm border border-zinc-800" value={orderForm.city} onChange={e => setOrderForm({...orderForm, city: e.target.value})} />
                                        <input placeholder="Stra√üe (–£–ª–∏—Ü–∞ –∏ –¥–æ–º)" className="w-full bg-black p-4 rounded-2xl outline-none text-sm border border-zinc-800" value={orderForm.street} onChange={e => setOrderForm({...orderForm, street: e.target.value})} />
                                        <input placeholder="PLZ (–ü–æ—á—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å)" type="number" className="w-full bg-black p-4 rounded-2xl outline-none text-sm border border-zinc-800" value={orderForm.zip} onChange={e => setOrderForm({...orderForm, zip: e.target.value})} />
                                    </div>

                                    <button onClick={handleOrder} className="w-full bg-orange-600 py-5 rounded-[30px] font-black text-xl uppercase italic shadow-2xl shadow-orange-600/30 active:scale-95 transition-all">
                                        –ó–∞–∫–∞–∑–∞—Ç—å ‚Äî {total}‚Ç¨
                                    </button>
                                </div>
                            ) : <div className="text-center py-20 opacity-20 font-black text-2xl italic uppercase">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>}
                        </main>
                    )}

                    {/* Admin Panel (Simplified) */}
                    {view === 'admin' && isAdmin && (
                        <main className="p-4 space-y-4 animate__animated animate__fadeIn">
                            <h2 className="text-xl font-black italic uppercase text-orange-500">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–ª–∞–¥–æ–º</h2>
                            <div className="space-y-2">
                                {products.map(p => (
                                    <div key={p.id} className="bg-zinc-900 p-4 rounded-2xl flex justify-between items-center border border-zinc-800">
                                        <div className="text-xs font-black uppercase italic">{p.name} <span className="text-orange-500 block">{p.price}‚Ç¨</span></div>
                                        <button 
                                            onClick={() => setProducts(products.map(pr => pr.id === p.id ? {...pr, inStock: !pr.inStock} : pr))}
                                            className={`px-4 py-2 rounded-xl text-[10px] font-black ${p.inStock ? 'bg-green-600' : 'bg-red-600'}`}
                                        >
                                            {p.inStock ? '–í –ù–ê–õ–ò–ß–ò–ò' : '–ù–ï–¢'}
                                        </button>
                                    </div>
                                ))}
                            </div>
                            <p className="text-[10px] text-zinc-500 text-center uppercase font-bold italic opacity-50">–î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–∏—Ç–µ Firebase</p>
                        </main>
                    )}

                    {/* Success Screen */}
                    {view === 'success' && (
                        <div className="fixed inset-0 bg-black z-[100] flex flex-col items-center justify-center p-10 text-center success-bg animate__animated animate__fadeIn">
                            <div className="mb-10 relative">
                                <div className="absolute inset-0 bg-orange-600 blur-[60px] opacity-20 animate-pulse"></div>
                                <img src={LOGO_URL} className="w-40 h-40 relative z-10" alt="Success" />
                            </div>
                            <h2 className="text-6xl font-black italic uppercase text-white tracking-tighter mb-16">–ü–†–ò–ù–Ø–¢–û!</h2>
                            <button 
                                onClick={() => {setCart({}); setView('shop');}} 
                                className="w-full bg-orange-600 py-6 rounded-[35px] font-black uppercase text-2xl italic shadow-[0_0_40px_rgba(249,115,22,0.4)] active:scale-95 transition-all border border-white/10"
                            >
                                –ì–û–¢–û–í–û
                            </button>
                        </div>
                    )}

                    {/* Floating Cart Button */}
                    {view === 'shop' && total > 0 && (
                        <div className="fixed bottom-6 left-6 right-6 z-40">
                            <button onClick={() => setView('cart')} className="w-full bg-orange-600 p-5 rounded-[30px] font-black flex justify-between items-center shadow-2xl active:scale-95 transition-all border border-white/10 shadow-orange-600/20">
                                <span className="italic uppercase pl-4 font-black tracking-tighter">–ö–æ—Ä–∑–∏–Ω–∞</span>
                                <span className="text-2xl italic pr-4 font-black tracking-tighter">{total}‚Ç¨</span>
                            </button>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

